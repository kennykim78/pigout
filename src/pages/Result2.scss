@import "../styles/variables";
@import "../styles/mixins";

// 기본 폰트 사이즈 변수 (40-50대 대상 - 최소 14px)
$result2-font-base: 16px;
$result2-font-small: 14px;
$result2-font-medium: 18px;
$result2-font-large: 22px;
$result2-font-xlarge: 28px;

// 컬러 팔레트 (흰바탕 + 검정포인트)
$result2-bg: #ffffff;
$result2-card-bg: #ffffff;
$result2-text-primary: #1a1a1a;
$result2-text-secondary: #666666;
$result2-accent: #000000;
$result2-border: #e5e5e5;
$result2-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);

// 상태 컬러
$color-good: #22c55e;
$color-caution: #f97316;
$color-danger: #ef4444;
$color-safe: #3b82f6;

.result2 {
  width: 100%;
  min-height: 100vh;
  background: $result2-bg;
  font-family: $font-family;
  font-size: $result2-font-base;
  color: $result2-text-primary;

  // 헤더
  &__header {
    position: sticky;
    top: 0;
    z-index: 100;
    background: $result2-bg;
    padding: 16px 20px;
    text-align: center;
    border-bottom: 1px solid $result2-border;
  }

  &__back-btn {
    position: absolute;
    left: 16px;
    top: 50%;
    transform: translateY(-50%);
    width: 44px;
    height: 44px;
    background: none;
    border: none;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: background 0.2s;

    &:hover {
      background: rgba(0, 0, 0, 0.05);
    }

    .material-symbols-rounded {
      font-size: 28px;
      color: $result2-accent;
    }
  }

  &__food-title {
    font-size: $result2-font-large;
    font-weight: 700;
    color: $result2-accent;
    margin: 0 0 4px;
  }

  &__subtitle {
    font-size: $result2-font-small;
    color: $result2-text-secondary;
    margin: 0;
  }

  &__food-image {
    display: none; // 헤더에서는 이미지 숨김
  }

  // 에러 섹션
  &__error {
    padding: 40px 20px;
    text-align: center;

    p {
      font-size: $result2-font-medium;
      color: $color-danger;
      margin-bottom: 16px;
    }

    button {
      padding: 14px 32px;
      background: $result2-accent;
      color: #fff;
      border: none;
      border-radius: 12px;
      font-size: $result2-font-base;
      font-weight: 600;
      cursor: pointer;
      transition: opacity 0.2s;

      &:hover {
        opacity: 0.9;
      }
    }
  }

  // 메인 컨텐츠 영역
  &__content {
    height: calc(100vh - 80px);
    overflow-y: auto;
    scroll-behavior: smooth;
    scroll-snap-type: y mandatory;

    // 스크롤바 스타일링
    &::-webkit-scrollbar {
      width: 4px;
    }

    &::-webkit-scrollbar-thumb {
      background: rgba(0, 0, 0, 0.2);
      border-radius: 2px;
    }
  }

  // 슬라이딩 카드 섹션 (1-4번)
  &__slide-section {
    .result2-card--slide {
      min-height: 100vh;
      scroll-snap-align: start;
      scroll-snap-stop: always;
      padding: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;

      // 겹쳐서 올라오는 효과
      &::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 60px;
        background: linear-gradient(
          to bottom,
          rgba(255, 255, 255, 1),
          rgba(255, 255, 255, 0)
        );
        pointer-events: none;
        z-index: 1;
      }

      &.active {
        .result2-card {
          transform: translateY(0);
          opacity: 1;
        }
      }
    }
  }

  // 일반 스크롤 섹션 (5-7번)
  &__scroll-section {
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 24px;
  }

  // 면책 조항
  &__disclaimer {
    padding: 20px;
    background: #f9f9f9;
    border-radius: 12px;
    margin-top: 20px;

    p {
      font-size: $result2-font-small;
      color: $result2-text-secondary;
      text-align: center;
      margin: 0;
      line-height: 1.5;
    }
  }
}

// 공통 카드 스타일
.result2-card {
  background: $result2-card-bg;
  border-radius: 24px;
  padding: 32px 24px;
  box-shadow: $result2-shadow;
  border: 1px solid $result2-border;
  width: 100%;
  max-width: 440px;
  margin: 0 auto;

  &__title {
    font-size: $result2-font-large;
    font-weight: 700;
    color: $result2-accent;
    margin: 0 0 24px;
    text-align: center;
  }
}

// ==========================================
// 1. 태그 클라우드 섹션
// ==========================================
.tagcloud {
  width: 100%;
  overflow: hidden;
  padding: 16px 0;

  &__track {
    display: flex;
    gap: 12px;
    animation: slideRightToLeft 30s linear infinite;
    width: max-content;
  }

  &__tag {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 12px 20px;
    border-radius: 30px;
    white-space: nowrap;
    font-weight: 600;
    transition: transform 0.2s;

    &:hover {
      transform: scale(1.05);
    }

    &--good {
      background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
      color: #166534;
      border: 1px solid #86efac;
    }

    &--bad {
      background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
      color: #991b1b;
      border: 1px solid #fca5a5;
    }

    // 랜덤 크기
    &--small {
      font-size: $result2-font-small;
      padding: 10px 16px;
    }

    &--medium {
      font-size: $result2-font-base;
      padding: 12px 20px;
    }

    &--large {
      font-size: $result2-font-medium;
      padding: 14px 24px;
    }
  }

  &__icon {
    font-size: 18px;
  }

  &__text {
    line-height: 1.3;
  }
}

@keyframes slideRightToLeft {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-50%);
  }
}

// ==========================================
// 2. 분석 결과 요약
// ==========================================
.summary-chart {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;

  &__graph {
    position: relative;
    width: 180px;
    height: 180px;
  }

  &__center {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
  }

  &__icon {
    font-size: 40px;
  }

  &__percent {
    font-size: $result2-font-large;
    font-weight: 700;
    color: $result2-accent;
  }

  &__status {
    display: flex;
    justify-content: center;
  }

  &__badge {
    padding: 10px 28px;
    border-radius: 30px;
    font-size: $result2-font-base;
    font-weight: 700;

    &--good {
      background: #dcfce7;
      color: #166534;
    }

    &--normal {
      background: #fef3c7;
      color: #92400e;
    }

    &--bad {
      background: #fef2f2;
      color: #991b1b;
    }
  }

  &__text {
    font-size: $result2-font-base;
    color: $result2-text-secondary;
    text-align: center;
    line-height: 1.6;
    margin: 0;
    padding: 0 8px;
  }
}

// ==========================================
// 3. 약물 상호작용 현황
// ==========================================
.drug-section {
  display: flex;
  flex-direction: column;
  gap: 16px;

  &--empty {
    text-align: center;
    padding: 32px 16px;
    background: #f8fafc;
    border-radius: 16px;

    .drug-section__icon {
      font-size: 48px;
      display: block;
      margin-bottom: 12px;
    }

    .drug-section__text {
      font-size: $result2-font-base;
      color: $result2-text-secondary;
      margin: 0;
    }
  }
}

.drug-item {
  padding: 16px 20px;
  border-radius: 16px;
  border-left: 4px solid;

  &--danger {
    background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
    border-left-color: $color-danger;
  }

  &--caution {
    background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
    border-left-color: $color-caution;
  }

  &--safe {
    background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
    border-left-color: $color-good;
  }

  &__header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 8px;
  }

  &__badge {
    font-size: $result2-font-small;
    font-weight: 700;
  }

  &__name {
    font-size: $result2-font-base;
    font-weight: 600;
    color: $result2-accent;
  }

  &__message {
    font-size: $result2-font-small;
    color: $result2-text-secondary;
    margin: 0;
    line-height: 1.5;
  }
}

// ==========================================
// 4. 위험 성분 분석
// ==========================================
.risk-section {
  &__list {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    justify-content: center;
    margin-bottom: 20px;
  }

  &__empty {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 24px;
    background: #f0fdf4;
    border-radius: 16px;
    color: #166534;
    font-size: $result2-font-base;
    font-weight: 600;
    margin-bottom: 20px;
  }

  &__check {
    font-size: 24px;
  }

  &__comment {
    font-size: $result2-font-base;
    color: $result2-text-secondary;
    text-align: center;
    line-height: 1.6;
    margin: 0;
    padding: 16px;
    background: #f9fafb;
    border-radius: 12px;
  }
}

.risk-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 18px;
  background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
  border: 1px solid #fecaca;
  border-radius: 30px;
  font-weight: 600;
  color: #991b1b;

  &__icon {
    font-size: 20px;
  }

  &__label {
    font-size: $result2-font-small;
  }
}

// ==========================================
// 5. 스마트 레시피
// ==========================================
.result2-card--recipe {
  .recipe-video {
    width: 100%;
    aspect-ratio: 16/9;
    border-radius: 16px;
    overflow: hidden;
    margin-bottom: 20px;

    iframe {
      width: 100%;
      height: 100%;
    }
  }

  .recipe-content {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  .recipe-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 16px;
    background: #f9fafb;
    border-radius: 12px;

    &__icon {
      font-size: 24px;
      flex-shrink: 0;
    }

    &__text {
      font-size: $result2-font-base;
      color: $result2-text-primary;
      line-height: 1.5;

      strong {
        color: $result2-accent;
        font-weight: 600;
      }
    }
  }
}

// ==========================================
// 6. 대체 음식 추천
// ==========================================
.alternative-list {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.alternative-item {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px;
  background: #f9fafb;
  border-radius: 16px;
  transition: transform 0.2s;

  &:hover {
    transform: translateX(4px);
  }

  &__image {
    width: 64px;
    height: 64px;
    border-radius: 12px;
    overflow: hidden;
    flex-shrink: 0;
    background: #e5e7eb;

    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
  }

  &__placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: $result2-font-large;
    font-weight: 700;
    color: #9ca3af;
    background: #e5e7eb;
  }

  &__content {
    flex: 1;
    min-width: 0;
  }

  &__name {
    font-size: $result2-font-base;
    font-weight: 600;
    color: $result2-accent;
    margin: 0 0 4px;
  }

  &__reason {
    font-size: $result2-font-small;
    color: $result2-text-secondary;
    margin: 0;
    line-height: 1.4;
  }
}

// ==========================================
// 7. 종합 분석
// ==========================================
.final-content {
  padding: 24px;
  background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
  border-radius: 16px;
  border: 1px solid #bae6fd;

  p {
    font-size: $result2-font-base;
    color: $result2-text-primary;
    line-height: 1.7;
    margin: 0;
    text-align: center;
  }
}

// ==========================================
// 애니메이션
// ==========================================
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
