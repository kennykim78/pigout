@import "../styles/variables";
@import "../styles/mixins";

// ê¸°ë³¸ í°íŠ¸ ì‚¬ì´ì¦ˆ ë³€ìˆ˜ (40-50ëŒ€ ëŒ€ìƒ - ìµœì†Œ 14px)
$result2-font-base: 16px;
$result2-font-small: 14px;
$result2-font-medium: 18px;
$result2-font-large: 22px;
$result2-font-xlarge: 28px;

// ì»¬ëŸ¬ íŒ”ë ˆíŠ¸ (í°ë°”íƒ• + ê²€ì •í¬ì¸íŠ¸)
$result2-bg: #ffffff;
$result2-card-bg: #ffffff;
$result2-text-primary: #1a1a1a;
$result2-text-secondary: #666666;
$result2-accent: #000000;
$result2-border: #e5e5e5;
$result2-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);

// ìƒíƒœ ì»¬ëŸ¬
$color-good: #22c55e;
$color-caution: #f97316;
$color-danger: #ef4444;
$color-safe: #3b82f6;

.result2 {
  width: 100%;
  min-height: 100vh;
  background: $result2-bg;
  font-family: $font-family;
  font-size: $result2-font-base;
  color: $result2-text-primary;

  // í—¤ë”
  &__header {
    position: sticky;
    top: 0;
    z-index: 100;
    background: $result2-bg;
    padding: 16px 20px;
    text-align: center;
    border-bottom: 1px solid $result2-border;
  }

  &__back-btn {
    position: absolute;
    left: 16px;
    top: 50%;
    transform: translateY(-50%);
    width: 44px;
    height: 44px;
    background: none;
    border: none;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: background 0.2s;

    &:hover {
      background: rgba(0, 0, 0, 0.05);
    }

    .material-symbols-rounded {
      font-size: 28px;
      color: $result2-accent;
    }
  }

  &__food-title {
    font-size: $result2-font-large;
    font-weight: 700;
    color: $result2-accent;
    margin: 0 0 4px;
  }

  &__subtitle {
    font-size: $result2-font-small;
    color: $result2-text-secondary;
    margin: 0;
  }

  &__food-image {
    display: none; // í—¤ë”ì—ì„œëŠ” ì´ë¯¸ì§€ ìˆ¨ê¹€
  }

  // ì—ëŸ¬ ì„¹ì…˜
  &__error {
    padding: 40px 20px;
    text-align: center;

    p {
      font-size: $result2-font-medium;
      color: $color-danger;
      margin-bottom: 16px;
    }

    button {
      padding: 14px 32px;
      background: $result2-accent;
      color: #fff;
      border: none;
      border-radius: 12px;
      font-size: $result2-font-base;
      font-weight: 600;
      cursor: pointer;
      transition: opacity 0.2s;

      &:hover {
        opacity: 0.9;
      }
    }
  }

  // ë©”ì¸ ì»¨í…ì¸  ì˜ì—­
  &__content {
    height: calc(100vh - 80px);
    overflow-y: auto;
    scroll-behavior: smooth;

    // ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ë§
    &::-webkit-scrollbar {
      width: 4px;
    }

    &::-webkit-scrollbar-thumb {
      background: rgba(0, 0, 0, 0.2);
      border-radius: 2px;
    }
  }

  // ì¼ë°˜ ìŠ¤í¬ë¡¤ ì„¹ì…˜
  &__scroll-section {
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 24px;
  }

  // ë©´ì±… ì¡°í•­
  &__disclaimer {
    padding: 20px;
    background: #f9f9f9;
    border-radius: 12px;
    margin-top: 20px;

    p {
      font-size: $result2-font-small;
      color: $result2-text-secondary;
      text-align: center;
      margin: 0;
      line-height: 1.5;
    }
  }
}

// ==========================================
// ì¹´ë“œ ìŠ¤íƒí‚¹ êµ¬ì¡° (Sticky Card Stack)
// ì°¸ê³ : í¬íŠ¸í´ë¦¬ì˜¤ ì§„ë‹¨ ì•± ìŠ¤íƒ€ì¼
// ==========================================
$card-height: 80vh;
$card-gap: 20px;

.result2-stack {
  position: relative;
  // ê° ì¹´ë“œê°€ 80vh + gapë§Œí¼ ê³µê°„ í™•ë³´
  // 5ê°œ ì¹´ë“œ ê¸°ì¤€

  &__card {
    position: sticky;
    top: 0;
    height: $card-height;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    // background: $result2-bg;
    z-index: 1;

    // ê° ì¹´ë“œë§ˆë‹¤ z-index ì¦ê°€ (ë‚˜ì¤‘ ì¹´ë“œê°€ ìœ„ë¡œ)
    @for $i from 1 through 5 {
      &:nth-child(#{$i}) {
        z-index: $i;
      }
    }

    // ì¹´ë“œ ë‚´ë¶€ ì»¨í…ì¸ 
    .result2-card {
      width: 100%;
      max-width: 440px;
      max-height: calc(#{$card-height} - 40px);
      overflow-y: auto;
      transform: scale(1);
      transition: transform 0.4s ease, box-shadow 0.4s ease;
      box-shadow: 0 8px 40px rgba(0, 0, 0, 0.12);

      // ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¹€ (ë‚´ë¶€ ìŠ¤í¬ë¡¤)
      &::-webkit-scrollbar {
        width: 3px;
      }
      &::-webkit-scrollbar-thumb {
        background: rgba(0, 0, 0, 0.15);
        border-radius: 2px;
      }
    }

    // ì´ë¯¸ ì§€ë‚˜ê°„ ì¹´ë“œ ìŠ¤íƒ€ì¼ (scaled ìƒíƒœ)
    &.passed {
      .result2-card {
        transform: scale(0.8);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      }
    }

    // í˜„ì¬ í™œì„± ì¹´ë“œ
    &.active {
      .result2-card {
        transform: scale(1);
        box-shadow: 0 12px 48px rgba(0, 0, 0, 0.15);
      }
    }

    // ì¹´ë“œ ìƒë‹¨ ê·¸ë¼ë°ì´ì…˜ ì˜¤ë²„ë ˆì´ (ë®ì´ëŠ” íš¨ê³¼)
    &::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 40px;
      // background: linear-gradient(
      //   to bottom,
      //   rgba(255, 255, 255, 0.95),
      //   rgba(255, 255, 255, 0)
      // );
      pointer-events: none;
      z-index: 10;
    }

    // ì²« ë²ˆì§¸ ì¹´ë“œëŠ” ê·¸ë¼ë°ì´ì…˜ ë¶ˆí•„ìš”
    &:first-child::before {
      display: none;
    }
  }

  // ì¹´ë“œ ë²ˆí˜¸ ì¸ë””ì¼€ì´í„°
  &__indicator {
    position: fixed;
    top: 100px;
    right: 20px;
    background: rgba(0, 0, 0, 0.8);
    color: #fff;
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 14px;
    font-weight: 600;
    z-index: 100;
  }
}

// ê³µí†µ ì¹´ë“œ ìŠ¤íƒ€ì¼
.result2-card {
  background: $result2-card-bg;
  border-radius: 24px;
  padding: 32px 24px;
  box-shadow: $result2-shadow;
  border: 1px solid $result2-border;
  width: 100%;
  max-width: 440px;
  margin: 0 auto;

  &__title {
    font-size: $result2-font-large;
    font-weight: 700;
    color: $result2-accent;
    margin: 0 0 24px;
    text-align: center;
  }

  // ğŸ†• ê³µí†µ ë¶„ì„ ì½”ë©˜íŠ¸ ìŠ¤íƒ€ì¼
  &__analysis {
    font-size: $result2-font-base;
    color: $result2-text-secondary;
    text-align: center;
    line-height: 1.6;
    margin: 20px 0 0;
    padding: 16px;
    background: #f9fafb;
    border-radius: 12px;
  }
}

// ==========================================
// 1. ì›Œë“œí´ë¼ìš°ë“œ ì„¹ì…˜ (Slido ìŠ¤íƒ€ì¼ + Pulse/Float ì• ë‹ˆë©”ì´ì…˜)
// ==========================================

// ğŸ†• Pulse + Float ë³µí•© ì• ë‹ˆë©”ì´ì…˜
@keyframes tagPulseFloat {
  0%,
  100% {
    transform: translateY(0) scale(1);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
  }
  25% {
    transform: translateY(-3px) scale(1.02);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
  }
  50% {
    transform: translateY(-6px) scale(1.06);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
  }
  75% {
    transform: translateY(-3px) scale(1.02);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
  }
}

// ì¢‹ì€ íƒœê·¸ìš© ê°•ì¡° ì• ë‹ˆë©”ì´ì…˜ (ì‚´ì§ ë” ë°ê²Œ)
@keyframes tagPulseFloatGood {
  0%,
  100% {
    transform: translateY(0) scale(1);
    box-shadow: 0 2px 6px rgba(34, 197, 94, 0.2);
    filter: brightness(1);
  }
  50% {
    transform: translateY(-5px) scale(1.05);
    box-shadow: 0 6px 16px rgba(34, 197, 94, 0.3);
    filter: brightness(1.05);
  }
}

// ë‚˜ìœ íƒœê·¸ìš© ê°•ì¡° ì• ë‹ˆë©”ì´ì…˜ (ì‚´ì§ ë” ë¶‰ê²Œ)
@keyframes tagPulseFloatBad {
  0%,
  100% {
    transform: translateY(0) scale(1);
    box-shadow: 0 2px 6px rgba(239, 68, 68, 0.2);
    filter: brightness(1);
  }
  50% {
    transform: translateY(-5px) scale(1.05);
    box-shadow: 0 6px 16px rgba(239, 68, 68, 0.3);
    filter: brightness(1.05);
  }
}

.wordcloud {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
  gap: 10px;
  padding: 16px 0;
  min-height: 200px;

  // ğŸ†• ì• ë‹ˆë©”ì´ì…˜ í™œì„±í™”ëœ ë²„ì „
  &--animated {
    .wordcloud__tag {
      animation-name: tagPulseFloat;
      animation-timing-function: ease-in-out;
      animation-iteration-count: infinite;

      &--good {
        animation-name: tagPulseFloatGood;
      }

      &--bad {
        animation-name: tagPulseFloatBad;
      }
    }
  }

  &__tag {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    border-radius: 30px;
    font-weight: 600;
    white-space: nowrap;
    transition: transform 0.2s, box-shadow 0.2s;
    cursor: default;
    will-change: transform, box-shadow; // ì„±ëŠ¥ ìµœì í™”

    // í˜¸ë²„ ì‹œ ì• ë‹ˆë©”ì´ì…˜ ì¼ì‹œì •ì§€ + ê°•ì¡°
    &:hover {
      animation-play-state: paused;
      transform: scale(1.12) !important;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2) !important;
      z-index: 10;
    }

    &--good {
      background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
      color: #166534;
      border: 1px solid #86efac;
    }

    &--bad {
      background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
      color: #991b1b;
      border: 1px solid #fca5a5;
    }

    // ë‹¤ì–‘í•œ í¬ê¸° (Slido ìŠ¤íƒ€ì¼)
    &--xs {
      font-size: 12px;
      padding: 6px 12px;
    }

    &--sm {
      font-size: 14px;
      padding: 8px 14px;
    }

    &--md {
      font-size: 16px;
      padding: 10px 18px;
    }

    &--lg {
      font-size: 20px;
      padding: 12px 22px;
    }

    &--xl {
      font-size: 24px;
      padding: 14px 28px;
    }
  }

  &__icon {
    font-size: inherit;
  }

  &__text {
    line-height: 1.2;
  }
}

// ==========================================
// 2. ì¥ë‹¨ì  ë¶„ì„ê²°ê³¼
// ==========================================
.summary-chart {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;

  &__graph {
    position: relative;
    width: 180px;
    height: 180px;
  }

  &__center {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
  }

  &__icon {
    font-size: 36px;
  }

  &__percent {
    font-size: $result2-font-large;
    font-weight: 700;
    color: $result2-accent;
  }

  // ğŸ†• ë²”ë¡€
  &__legend {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 12px;

    .legend-item {
      font-size: $result2-font-small;
      font-weight: 600;
      padding: 6px 12px;
      border-radius: 20px;

      &--good {
        background: #dcfce7;
        color: #166534;
      }

      &--bad {
        background: #fef3c7;
        color: #92400e;
      }

      &--warning {
        background: #fef2f2;
        color: #991b1b;
      }
    }
  }
}

// ==========================================
// 3. ì˜ì–‘ì„±ë¶„ ì •ë³´ (2column)
// ==========================================
.nutrition {
  &__serving {
    font-size: $result2-font-small;
    color: $result2-text-secondary;
    text-align: center;
    margin: -16px 0 20px;
  }

  // ğŸ†• 2column ê·¸ë¦¬ë“œ
  &__grid--2col {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
  }

  &__item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px;
    background: #f9fafb;
    border-radius: 16px;
    transition: transform 0.2s;

    &:hover {
      transform: translateY(-2px);
    }

    // ğŸ†• ìœ„í—˜ ì„±ë¶„ í•˜ì´ë¼ì´íŠ¸
    &--warning {
      background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
      border: 1px solid #fecaca;
    }
  }

  &__icon {
    font-size: 32px;
    flex-shrink: 0;
  }

  &__info {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  &__name {
    font-size: $result2-font-small;
    color: $result2-text-secondary;
  }

  &__value {
    display: flex;
    align-items: baseline;
    gap: 2px;
  }

  &__number {
    font-size: $result2-font-xlarge;
    font-weight: 700;
    color: $result2-accent;
    line-height: 1;
  }

  &__unit {
    font-size: $result2-font-small;
    color: $result2-text-secondary;
  }

  // ğŸ†• ì¢‹ì€ ì„±ë¶„ / ì£¼ì˜ ì„±ë¶„ íƒœê·¸
  &__tags {
    margin-top: 20px;
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  &__tag-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  &__tag-label {
    font-size: $result2-font-small;
    font-weight: 600;
    color: $result2-text-secondary;
    text-align: center;
  }

  &__tag-list {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px;
  }

  &__tag {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: $result2-font-small;
    font-weight: 600;
    padding: 8px 14px;
    border-radius: 20px;
    transition: transform 0.2s;

    &:hover {
      transform: scale(1.05);
    }

    &--good {
      background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
      color: #166534;
      border: 1px solid #86efac;
    }

    &--caution {
      background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
      color: #991b1b;
      border: 1px solid #fecaca;
    }
  }
}

// ==========================================
// 4. ì•½ë¬¼ ìƒí˜¸ì‘ìš© í˜„í™©
// ==========================================
.drug-section {
  display: flex;
  flex-direction: column;
  gap: 16px;

  &--empty {
    text-align: center;
    padding: 32px 16px;
    background: #f8fafc;
    border-radius: 16px;

    .drug-section__icon {
      font-size: 48px;
      display: block;
      margin-bottom: 12px;
    }

    .drug-section__text {
      font-size: $result2-font-base;
      color: $result2-text-secondary;
      margin: 0;
    }
  }
}

.drug-item {
  padding: 16px 20px;
  border-radius: 16px;
  border-left: 4px solid;

  &--danger {
    background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
    border-left-color: $color-danger;
  }

  &--caution {
    background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
    border-left-color: $color-caution;
  }

  &--safe {
    background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
    border-left-color: $color-good;
  }

  &__header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 8px;
  }

  &__badge {
    font-size: $result2-font-small;
    font-weight: 700;
  }

  &__name {
    font-size: $result2-font-base;
    font-weight: 600;
    color: $result2-accent;
  }

  &__message {
    font-size: $result2-font-small;
    color: $result2-text-secondary;
    margin: 0;
    line-height: 1.5;
  }
}

// ğŸ†• ì•½ë¬¼ ê´€ë ¨ ìœ„í—˜ ì„±ë¶„ í‘œì‹œ
.drug-risks {
  margin-bottom: 20px;
  padding: 16px;
  background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
  border-radius: 16px;
  border: 1px solid #fecaca;

  &__title {
    font-size: $result2-font-small;
    font-weight: 600;
    color: #991b1b;
    margin: 0 0 12px;
    text-align: center;
  }

  &__list {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  &__item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 14px;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 12px;
  }

  &__icon {
    font-size: 24px;
    flex-shrink: 0;
  }

  &__content {
    flex: 1;
    min-width: 0;
  }

  &__label {
    font-size: $result2-font-small;
    font-weight: 600;
    color: $result2-accent;
    display: block;
  }

  &__warning {
    font-size: 12px;
    color: $result2-text-secondary;
    display: block;
    margin-top: 2px;
  }
}

// ==========================================
// 5. ì„±ë¶„ ë¶„ì„ (ìœ„í—˜ + ì¢‹ì€ ì„±ë¶„)
// ==========================================
.component-section {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.component-group {
  &__title {
    font-size: $result2-font-base;
    font-weight: 600;
    color: $result2-text-primary;
    margin: 0 0 12px;
    text-align: center;
  }
}

.component-list {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
}

.component-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 18px;
  border-radius: 30px;
  font-weight: 600;
  transition: transform 0.2s;

  &:hover {
    transform: scale(1.05);
  }

  &--good {
    background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
    color: #166534;
    border: 1px solid #86efac;
  }

  &--risk {
    background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
    color: #991b1b;
    border: 1px solid #fecaca;
  }

  &__icon {
    font-size: 20px;
  }

  &__label {
    font-size: $result2-font-small;
  }
}

.component-empty {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 24px;
  background: #f0fdf4;
  border-radius: 16px;
  color: #166534;
  font-size: $result2-font-base;
  font-weight: 600;

  &__check {
    font-size: 24px;
  }
}

// ==========================================
// 6. ìŠ¤ë§ˆíŠ¸ ë ˆì‹œí”¼
// ==========================================
.result2-card--recipe {
  .recipe-video {
    width: 100%;
    aspect-ratio: 16/9;
    border-radius: 16px;
    overflow: hidden;
    margin-bottom: 20px;

    iframe {
      width: 100%;
      height: 100%;
    }
  }

  .recipe-content {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  .recipe-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 16px;
    background: #f9fafb;
    border-radius: 12px;

    &__icon {
      font-size: 24px;
      flex-shrink: 0;
    }

    &__text {
      font-size: $result2-font-base;
      color: $result2-text-primary;
      line-height: 1.5;

      strong {
        color: $result2-accent;
        font-weight: 600;
      }
    }
  }
}

// ==========================================
// 7. ëŒ€ì²´ ìŒì‹ ì¶”ì²œ
// ==========================================
.alternative-list {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.alternative-item {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px;
  background: #f9fafb;
  border-radius: 16px;
  transition: transform 0.2s;

  &:hover {
    transform: translateX(4px);
  }

  &__image {
    width: 64px;
    height: 64px;
    border-radius: 12px;
    overflow: hidden;
    flex-shrink: 0;
    background: #e5e7eb;

    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
  }

  &__placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: $result2-font-large;
    font-weight: 700;
    color: #9ca3af;
    background: #e5e7eb;
  }

  &__content {
    flex: 1;
    min-width: 0;
  }

  &__name {
    font-size: $result2-font-base;
    font-weight: 600;
    color: $result2-accent;
    margin: 0 0 4px;
  }

  &__reason {
    font-size: $result2-font-small;
    color: $result2-text-secondary;
    margin: 0;
    line-height: 1.4;
  }
}

// ==========================================
// 8. ì¢…í•© ë¶„ì„ (ìƒì„¸ ì´í‰)
// ==========================================
.final-content {
  padding: 24px;
  background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
  border-radius: 16px;
  border: 1px solid #bae6fd;

  p {
    font-size: $result2-font-base;
    color: $result2-text-primary;
    line-height: 1.7;
    margin: 0;
    text-align: center;
  }

  // ğŸ†• ì¢…í•© ë¶„ì„ í…ìŠ¤íŠ¸ (pre íƒœê·¸)
  &__text {
    font-family: $font-family;
    font-size: $result2-font-small;
    color: $result2-text-primary;
    line-height: 1.8;
    white-space: pre-wrap;
    word-wrap: break-word;
    margin: 0;
    text-align: left;
    background: transparent;

    // ì„¹ì…˜ êµ¬ë¶„ì„ 
    hr {
      border: none;
      border-top: 1px dashed rgba(0, 0, 0, 0.1);
      margin: 16px 0;
    }
  }
}

// ==========================================
// ì• ë‹ˆë©”ì´ì…˜
// ==========================================
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// ==========================================
// ğŸ†• 2. ì„­ì·¨ íƒ€ì´ë° ê°€ì´ë“œ
// ==========================================
.timing-section {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.timing-grid {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.timing-item {
  padding: 16px;
  border-radius: 16px;
  transition: transform 0.2s;

  &:hover {
    transform: translateX(4px);
  }

  &--good {
    background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
    border: 1px solid #86efac;
  }

  &--bad {
    background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
    border: 1px solid #fecaca;
  }

  &__header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 8px;
  }

  &__icon {
    font-size: 24px;
  }

  &__time {
    font-size: $result2-font-medium;
    font-weight: 700;
    color: $result2-accent;
  }

  &__badge {
    font-size: 12px;
    font-weight: 600;
    padding: 4px 10px;
    border-radius: 12px;
    margin-left: auto;

    &--good {
      background: #22c55e;
      color: #fff;
    }

    &--bad {
      background: #ef4444;
      color: #fff;
    }
  }

  &__reason {
    font-size: $result2-font-small;
    color: $result2-text-secondary;
    margin: 0;
    line-height: 1.5;
  }
}

.timing-medicine {
  margin-top: 8px;

  &__title {
    font-size: $result2-font-base;
    font-weight: 600;
    color: $result2-text-primary;
    margin: 0 0 12px;
    text-align: center;
  }

  &__item {
    display: flex;
    gap: 12px;
    padding: 14px;
    border-radius: 12px;
    margin-bottom: 8px;

    &--danger {
      background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
      border: 1px solid $color-danger;
    }

    &--caution {
      background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
      border: 1px solid $color-caution;
    }
  }

  &__header {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    min-width: 60px;
  }

  &__icon {
    font-size: 24px;
  }

  &__interval {
    font-size: 12px;
    font-weight: 700;
    color: $result2-accent;
  }

  &__content {
    flex: 1;
  }

  &__drugs {
    font-size: $result2-font-small;
    font-weight: 600;
    color: $result2-accent;
    margin: 0 0 4px;
  }

  &__guide {
    font-size: $result2-font-small;
    color: $result2-text-secondary;
    margin: 0;
    line-height: 1.4;
  }
}

// ==========================================
// ğŸ†• 3. ê°œì¸ ë§ì¶¤ ê¶Œì¥ ì„­ì·¨ëŸ‰
// ==========================================
.portion-section {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.portion-main {
  text-align: center;
  padding: 24px;
  background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
  border-radius: 20px;
  border: 1px solid #bae6fd;

  &__amount {
    display: flex;
    align-items: baseline;
    justify-content: center;
    gap: 4px;
  }

  &__number {
    font-size: 56px;
    font-weight: 800;
    color: $result2-accent;
    line-height: 1;
  }

  &__unit {
    font-size: $result2-font-large;
    font-weight: 600;
    color: $result2-text-secondary;
  }

  &__label {
    font-size: $result2-font-base;
    color: $result2-text-secondary;
    margin: 8px 0 0;
  }

  &__note {
    font-size: $result2-font-small;
    color: $color-caution;
    margin: 8px 0 0;
    font-weight: 500;
  }

  &__reasons {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px;
    margin-top: 12px;
  }

  &__reason-tag {
    font-size: 12px;
    font-weight: 600;
    padding: 6px 12px;
    background: rgba(0, 0, 0, 0.05);
    border-radius: 20px;
    color: $result2-text-secondary;
  }
}

.portion-frequency {
  text-align: center;
  padding: 20px;
  background: #f9fafb;
  border-radius: 16px;

  &__header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    margin-bottom: 8px;
  }

  &__icon {
    font-size: 28px;
  }

  &__value {
    font-size: $result2-font-large;
    font-weight: 700;
    color: $result2-accent;
  }

  &__note {
    font-size: $result2-font-small;
    color: $result2-text-secondary;
    margin: 0;
  }
}

.portion-daily {
  &__title {
    font-size: $result2-font-base;
    font-weight: 600;
    color: $result2-text-primary;
    margin: 0 0 16px;
    text-align: center;
  }

  &__grid {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  &__item {
    display: grid;
    grid-template-columns: 28px 60px 1fr 45px;
    align-items: center;
    gap: 10px;
  }

  &__icon {
    font-size: 20px;
    text-align: center;
  }

  &__name {
    font-size: $result2-font-small;
    color: $result2-text-secondary;
  }

  &__bar {
    height: 8px;
    background: #e5e7eb;
    border-radius: 4px;
    overflow: hidden;
  }

  &__fill {
    height: 100%;
    background: linear-gradient(90deg, #3b82f6 0%, #60a5fa 100%);
    border-radius: 4px;
    transition: width 0.5s ease;
  }

  &__percent {
    font-size: $result2-font-small;
    font-weight: 600;
    color: $result2-text-primary;
    text-align: right;

    &--high {
      color: $color-caution;
    }
  }
}
